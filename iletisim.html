<!DOCTYPE html>
<html lang="tr" ng-app="GirisApp">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ƒ∞leti≈üim - GLOW</title>

    <!-- CSS -->
    <link rel="stylesheet" href="assets/css/style.css" />

    <!-- AngularJS -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <script src="assets/js/app.js"></script>

    <!-- Page Specific CSS -->
    <style>
      .contact-container {
        position: relative;
        max-width: 100%;
        margin: 0;
        padding: 20px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 0;
        box-shadow: none;
        backdrop-filter: blur(10px);
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        text-align: center;
        width: 100%;
        min-height: 100vh;
      }

      .contact-title {
        margin-bottom: 30px;
        font-size: 2rem;
        color: #7c5c4a;
        font-weight: 700;
        letter-spacing: 1px;
        text-shadow: 0 2px 12px rgba(124, 92, 74, 0.1);
        text-transform: uppercase;
      }

      .contact-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
        margin: 20px 0;
      }

      .contact-bottom {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
        margin-top: 20px;
      }

      .contact-item {
        background: transparent;
        border-radius: 12px;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        padding: 30px 20px;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        min-height: 150px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }

      .contact-item:hover {
        transform: translateY(-8px);
        box-shadow: 0 16px 48px rgba(0, 0, 0, 0.15);
      }

      .contact-item h3 {
        margin: 0 0 10px 0;
        color: #7c5c4a;
        font-size: 18px;
        font-weight: 600;
      }

      .contact-item p {
        margin: 0;
        color: #666;
        font-size: 16px;
        line-height: 1.4;
      }

      .contact-item i {
        font-size: 20px;
        color: #b48a78;
        margin-bottom: 10px;
        display: block;
      }

      .login-message {
        text-align: center;
        color: #7c5c4a;
        margin: 100px 0;
        font-size: 25px;
        background: rgba(255, 255, 255, 0.9);
        padding: 40px;
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
      }

      .login-message a {
        color: #b48a78;
        text-decoration: none;
        font-weight: bold;
        margin: 0 10px;
      }

      .login-message a:hover {
        text-decoration: underline;
      }

      /* ƒ∞leti≈üim Formu Stilleri */
      .contact-form-container {
        margin-top: 50px;
        padding: 40px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 16px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
      }

      .form-title {
        color: #7c5c4a;
        font-size: 28px;
        font-weight: 600;
        text-align: center;
        margin-bottom: 30px;
      }

      .contact-form {
        max-width: 800px;
        margin: 0 auto;
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin-bottom: 20px;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-group label {
        display: block;
        margin-bottom: 8px;
        color: #7c5c4a;
        font-weight: 600;
        font-size: 16px;
      }

      .form-group input,
      .form-group textarea {
        width: 100%;
        padding: 12px 16px;
        border: 2px solid #e0e0e0;
        border-radius: 8px;
        font-size: 16px;
        font-family: inherit;
        transition: border-color 0.3s ease;
        background: rgba(255, 255, 255, 0.9);
        box-sizing: border-box;
      }

      .form-group input:focus,
      .form-group textarea:focus {
        outline: none;
        border-color: #b48a78;
        box-shadow: 0 0 0 3px rgba(180, 138, 120, 0.1);
      }

      .form-group textarea {
        resize: vertical;
        min-height: 120px;
      }

      .character-count {
        text-align: right;
        font-size: 14px;
        color: #666;
        margin-top: 5px;
      }

      .submit-btn {
        width: 100%;
        padding: 15px 30px;
        background: linear-gradient(135deg, #e2d9d0, #d1c6b1, #f8e0e1, #c0b2b0);
        color: #7c5c4a;
        border: none;
        border-radius: 8px;
        font-size: 18px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 20px;
      }

      .submit-btn:hover:not(:disabled) {
        background: linear-gradient(135deg, #f8e0e1, #d1c6b1, #e2d9d0, #c0b2b0);
        transform: translateY(-2px);
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
      }

      .submit-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      .user-info {
        background: rgba(180, 138, 120, 0.1);
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 30px;
        border-left: 4px solid #b48a78;
      }

      .user-info p {
        margin: 5px 0;
        color: #7c5c4a;
        font-size: 16px;
      }

      .user-info strong {
        color: #b48a78;
      }

      .form-info {
        background: rgba(180, 138, 120, 0.1);
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        border-left: 4px solid #b48a78;
        text-align: center;
      }

      .form-info p {
        margin: 0;
        color: #7c5c4a;
        font-size: 16px;
      }

      .form-info strong {
        color: #b48a78;
      }

      .email-warning {
        background: rgba(255, 193, 7, 0.1);
        padding: 20px;
        border-radius: 8px;
        margin-bottom: 30px;
        border-left: 4px solid #ffc107;
        text-align: center;
      }

      .email-warning p {
        margin: 5px 0;
        color: #856404;
        font-size: 16px;
      }

      .email-warning strong {
        color: #ffc107;
      }

      .email-warning a {
        color: #b48a78;
        text-decoration: none;
        font-weight: bold;
      }

      .email-warning a:hover {
        text-decoration: underline;
      }

      @media (max-width: 768px) {
        .contact-container {
          margin: 20px;
          padding: 20px;
          max-width: 100%;
        }

        .contact-title {
          font-size: 2rem;
        }

        .contact-grid {
          grid-template-columns: 1fr;
          gap: 20px;
        }

        .contact-bottom {
          grid-template-columns: repeat(2, 1fr);
          gap: 20px;
        }

        .contact-item {
          padding: 30px 20px;
          min-height: 150px;
        }

        .contact-form-container {
          padding: 20px;
        }

        .form-row {
          grid-template-columns: 1fr;
          gap: 15px;
        }

        .form-title {
          font-size: 24px;
        }
      }
    </style>
  </head>
  <body ng-controller="MainController">
    <!-- Header Component -->
    <ng-include src="'components/header.html'"></ng-include>

    <!-- Main Content -->
    <main class="main-content">
      <div ng-controller="IletisimController">
        <!-- Giri≈ü yapmamƒ±≈ü kullanƒ±cƒ±lar i√ßin mesaj -->
        <div ng-if="!kullanici" class="login-message">
          Bu i√ßeriƒüi g√∂rmek i√ßin l√ºtfen
          <a href="index.html">giri≈ü yapƒ±n</a> veya
          <a href="kayit.html">kayƒ±t olun</a>.
        </div>

        <!-- Giri≈ü yapmƒ±≈ü kullanƒ±cƒ±lar i√ßin i√ßerik -->
        <div class="contact-container">
          <h2 class="contact-title">ƒ∞LETƒ∞≈ûƒ∞M</h2>
          <div class="contact-grid">
            <div class="contact-item" style="padding: 0; min-height: 300px">
              <div
                style="
                  border-radius: 12px;
                  overflow: hidden;
                  box-shadow: 0 2px 12px rgba(124, 92, 74, 0.08);
                  width: 100%;
                  height: 100%;
                "
              >
                <iframe
                  src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3010.9053747099806!2d28.665045976713127!3d41.005444271350875!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x14caa1baf78be10d%3A0x4180090b13edab41!2sTekprosis%20Bilgisayar%20Mikro%20Yaz%C4%B1l%C4%B1m!5e0!3m2!1str!2str!4v1755095798462!5m2!1str!2str"
                  width="100%"
                  height="100%"
                  style="border: 0; min-height: 300px"
                  allowfullscreen=""
                  loading="lazy"
                  referrerpolicy="no-referrer-when-downgrade"
                  title="ƒ∞stanbul Harita"
                ></iframe>
              </div>
            </div>
          </div>

          <div class="contact-bottom">
            <div class="contact-item">
              <i>üìç</i>
              <h3>Adres</h3>
              <p>
                Nanna Plaza, Yakuplu, 208 Sk No:23 Kat:3 D:3, 34524
                Beylikd√ºz√º/ƒ∞stanbul<br />34000
              </p>
            </div>
            <div class="contact-item">
              <i>‚úâÔ∏è</i>
              <h3>E-posta</h3>
              <p>info@glowtech.com<br />destek@glowtech.com</p>
            </div>
            <div class="contact-item">
              <i>üìû</i>
              <h3>Telefon</h3>
              <p>0 (212) 123 45 67<br />+90 532 123 45 67</p>
            </div>
            <div class="contact-item">
              <i>üïí</i>
              <h3>√áalƒ±≈üma Saatleri</h3>
              <p>Pazartesi - Cuma<br />09:00 - 18:00</p>
            </div>
          </div>

          <!-- ƒ∞leti≈üim Formu -->
          <div class="contact-form-container">
            <h3 class="form-title">Bizimle ƒ∞leti≈üime Ge√ßin</h3>

            <!-- Form ba≈ülƒ±ƒüƒ± -->
            <div class="form-info">
              <p>
                <strong
                  >Mesajƒ±nƒ±zƒ± g√∂ndermek i√ßin a≈üaƒüƒ±daki alanlarƒ±
                  doldurun:</strong
                >
              </p>
            </div>

            <form ng-submit="mesajGonder()" class="contact-form" novalidate>
              <!-- Debug bilgisi -->

              <div class="form-row">
                <div class="form-group">
                  <label for="username">Ad Soyad</label>
                  <input
                    type="text"
                    id="username"
                    ng-model="mesajForm.username"
                    placeholder="Adƒ±nƒ±z ve soyadƒ±nƒ±z"
                    required
                  />
                </div>
                <div class="form-group">
                  <label for="email">E-posta</label>
                  <input
                    type="email"
                    id="email"
                    ng-model="mesajForm.email"
                    placeholder="E-posta adresiniz"
                    required
                  />
                </div>
              </div>
              <div class="form-group">
                <label for="konu">Konu</label>
                <input
                  type="text"
                  id="konu"
                  ng-model="mesajForm.konu"
                  placeholder="Mesajƒ±nƒ±zƒ±n konusu"
                  required
                />
              </div>
              <div class="form-group">
                <label for="message">Mesajƒ±nƒ±z</label>
                <textarea
                  id="message"
                  ng-model="mesajForm.message"
                  placeholder="Mesajƒ±nƒ±zƒ± yazƒ±n (en az 10 karakter)"
                  rows="5"
                  maxlength="300"
                  required
                ></textarea>
                <div class="character-count">
                  {{ mesajForm.message ? mesajForm.message.length : 0 }}/300
                </div>
              </div>
              <button
                type="submit"
                class="submit-btn"
                ng-disabled="false"
                title="Ad Soyad: {{ mesajForm.username ? 'Dolu' : 'Bo≈ü' }}, E-posta: {{ mesajForm.email ? 'Dolu' : 'Bo≈ü' }}, Konu: {{ mesajForm.konu ? 'Dolu' : 'Bo≈ü' }}, Mesaj: {{ mesajForm.message ? mesajForm.message.length + ' karakter' : 'Bo≈ü' }}"
                style="position: relative"
              >
                Mesaj G√∂nder
              </button>
            </form>
          </div>
        </div>
      </div>
    </main>

    <!-- Footer Component -->
    <ng-include src="'components/footer.html'"></ng-include>

    <!-- Scroll to Top Button -->
    <button id="scrollTopBtn" title="Yukarƒ± √áƒ±k" ng-click="scrollToTop()">
      ‚Üë
    </button>

    <script>
      angular
        .module("GirisApp")
        .controller("IletisimController", function ($scope, $http) {
          $scope.kullanici = JSON.parse(
            localStorage.getItem("girisYapan") || "null"
          );

          $scope.mesajForm = {
            username: "",
            email: "",
            konu: "",
            message: "",
          };

          $scope.mesajGonder = function () {
            if (!$scope.mesajForm.username) {
              alert("L√ºtfen ad soyad bilginizi girin!");
              return;
            }

            if (!$scope.mesajForm.email) {
              alert("L√ºtfen e-posta adresinizi girin!");
              return;
            }

            if (!$scope.mesajForm.konu) {
              alert("L√ºtfen mesaj konusunu girin!");
              return;
            }

            if (!$scope.mesajForm.message) {
              alert("L√ºtfen mesajƒ±nƒ±zƒ± yazƒ±n!");
              return;
            }

            if ($scope.mesajForm.message.length < 10) {
              alert("Mesaj en az 10 karakter olmalƒ±dƒ±r!");
              return;
            }

            // Mesaj verilerini hazƒ±rla
            var mesajData = {
              username: $scope.mesajForm.username,
              email: $scope.mesajForm.email,
              konu: $scope.mesajForm.konu,
              message: $scope.mesajForm.message,
            };

            $http
              .post("api.php?iletisim=1", mesajData)
              .then(function (response) {
                console.log("API yanƒ±tƒ±:", response);
                if (response.data && response.data.success) {
                  alert("Mesajƒ±nƒ±z ba≈üarƒ±yla g√∂nderildi!");
                  // Formu tamamen temizle
                  $scope.mesajForm = {
                    username: "",
                    email: "",
                    konu: "",
                    message: "",
                  };
                } else {
                  var errorMsg = "Mesaj g√∂nderilemedi";
                  if (response.data && response.data.message) {
                    errorMsg += ": " + response.data.message;
                  }
                  alert(errorMsg);
                }
              })
              .catch(function (error) {
                console.error("Hata detayƒ±:", error);
                var errorMessage = "Bir hata olu≈ütu";
                if (error.statusText) {
                  errorMessage += ": " + error.statusText;
                } else if (error.message) {
                  errorMessage += ": " + error.message;
                } else if (error.data && error.data.message) {
                  errorMessage += ": " + error.data.message;
                }
                alert(errorMessage);
              });
          };

          $scope.scrollToTop = function () {
            window.scrollTo({ top: 0, behavior: "smooth" });
          };
        });
    </script>
  </body>
</html>
