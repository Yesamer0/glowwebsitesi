<!DOCTYPE html>
<html lang="tr" ng-app="GirisApp">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dram Filmleri - GLOW</title>
    <link rel="stylesheet" href="assets/css/style.css" />
    <link rel="stylesheet" href="assets/css/film-styles.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <script src="assets/js/app.js"></script>
        position: absolute;
        top: 28px;
        right: 28px;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
      }
      .geri-btn:hover {
        background: linear-gradient(135deg, #c82333, #dc3545);
        transform: scale(1.1);
      }
      .loading {
        text-align: center;
        padding: 40px;
        color: #dc3545;
        font-size: 1.2rem;
      }
      .error {
        text-align: center;
        padding: 40px;
        color: #e74c3c;
        font-size: 1.1rem;
        background: rgba(231, 76, 60, 0.1);
        border-radius: 10px;
        margin: 20px 0;
      }
    </style>
  </head>
  <body ng-controller="DramFilmlerController">
    <ng-include src="'components/header.html'"></ng-include>
    <main>
      <div class="filmler-container">
        <div class="filmler-title">üé≠ Dram Filmleri</div>
        <button class="geri-btn" onclick="window.history.back()">‚Üê</button>

        <!-- Loading durumu -->
        <div ng-if="loading" class="loading">
          <p>Filmler y√ºkleniyor...</p>
        </div>

        <!-- Hata durumu -->
        <div ng-if="error" class="error">
          <p>{{ error }}</p>
        </div>

        <!-- Film listesi -->
        <div class="filmler-grid" ng-if="!loading && !error">
          <div
            class="film-card"
            ng-repeat="film in filmler"
            ng-click="filmDetay(film.id)"
          >
            <img
              ng-src="{{ film.poster_url }}"
              ng-alt="{{ film.film_adi }}"
              class="film-poster"
              onerror="this.src='https://via.placeholder.com/300x450/cccccc/666666?text=Poster+Bulunamadƒ±'"
            />
            <div class="film-icerik">
              <div class="film-baslik">{{ film.film_adi }}</div>
              <div class="film-yil">{{ film.yil }}</div>
              <div class="film-imdb">‚≠ê IMDb: {{ film.imdb_puani }}</div>
              <div class="film-ozet">{{ film.ozet }}</div>
              <button class="film-btn">Detaylarƒ± G√∂r</button>
            </div>
          </div>
        </div>
      </div>
    </main>
    <ng-include src="'components/footer.html'"></ng-include>
    <button id="scrollTopBtn" title="Yukarƒ± √áƒ±k" ng-click="scrollToTop()">
      ‚Üë
    </button>
    <script>
      angular
        .module("GirisApp")
        .controller("DramFilmlerController", function ($scope, $http) {
          $scope.loading = true;
          $scope.error = null;
          $scope.filmler = [];

          // Veritabanƒ±ndan filmleri √ßek
          $http
            .get("api.php?films=1&kategori=Dram")
            .then(function (response) {
              $scope.filmler = response.data;
              $scope.loading = false;
            })
            .catch(function (error) {
              $scope.error =
                "Filmler y√ºklenirken hata olu≈ütu: " + error.data.message;
              $scope.loading = false;
            });

          $scope.filmDetay = function (filmId) {
            window.location.href = "film-detay.html?id=" + filmId;
          };

          $scope.scrollToTop = function () {
            window.scrollTo({ top: 0, behavior: "smooth" });
          };
        });
    </script>
  </body>
</html>
